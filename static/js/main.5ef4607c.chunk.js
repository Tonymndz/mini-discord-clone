(this["webpackJsonpmini-discord-clone"]=this["webpackJsonpmini-discord-clone"]||[]).push([[0],{119:function(e,n,t){},124:function(e,n,t){},126:function(e,n,t){},129:function(e,n,t){},130:function(e,n,t){},131:function(e,n,t){},133:function(e,n,t){},142:function(e,n,t){},143:function(e,n,t){},144:function(e,n,t){},1582:function(e,n,t){"use strict";t.r(n);var a=t(1),c=t.n(a),s=t(11),i=t.n(s),r=(t(119),t(67)),o=t.n(r),l=t(88),d=t(28),j=t(50),u=t(69),h=t.n(u),b=t(94),m=t.n(b),O=t(95),p=t.n(O),f=t(96),v=t.n(f),x=t(97),g=t.n(x),_=t(47),N=Object(_.b)({name:"app",initialState:{channelId:null,channelName:null},reducers:{setChannelInfo:function(e,n){e.channelId=n.payload.channelId,e.channelName=n.payload.channelName}}}),C=N.actions.setChannelInfo,S=function(e){return e.app.channelId},A=function(e){return e.app.channelName},I=N.reducer,P=(t(124),t(5));var E=function(e){var n=e.id,t=e.channelName,a=e.isSelectedChannel,c=e.selectChannel,s=Object(d.b)();return Object(P.jsx)("div",{className:"SidebarChannel".concat(a?"-active":"-unactive"),onClick:function(){c(),s(C({channelId:n,channelName:t}))},children:Object(P.jsxs)("h4",{children:[Object(P.jsx)("span",{className:"SidebarChannel_hash",children:"#"}),t]})})},T=t(1608),y=Object(_.b)({name:"user",initialState:{user:null},reducers:{login:function(e,n){e.user=n.payload},logout:function(e){e.user=null}}}),R=y.actions,w=R.login,k=(R.logout,function(e){return e.user.user}),z=y.reducer,D=(t(126),t(43)),K=Object({NODE_ENV:"production",PUBLIC_URL:"/mini-discord-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_apiKey:"AIzaSyArzU5IKtR9yTaiH7T6eSUk037Kpi21Aew",REACT_APP_appId:'1:585254623929:web:57a08d3130d8223c711968"',REACT_APP_authDomain:"discord-clone-yt2.firebaseapp.com",REACT_APP_measurementId:"G-NGNZ4VKXFK",REACT_APP_messagingSenderId:"585254623929",REACT_APP_projectId:"discord-clone-yt2",REACT_APP_storageBucket:"discord-clone-yt2.appspot.com"}),H={apiKey:K.REACT_APP_apiKey,authDomain:K.REACT_APP_authDomain,projectId:K.REACT_APP_projectId,storageBucket:K.REACT_APP_storageBucket,messagingSenderId:K.REACT_APP_messagingSenderId,appId:K.REACT_APP_appId,measurementId:K.REACT_APP_measurementId},M=D.a.initializeApp(H).firestore(),W=D.a.auth(),B=(new D.a.auth.GoogleAuthProvider,M);var U=function(){var e=Object(d.c)(k),n=Object(a.useState)([]),t=Object(j.a)(n,2),c=t[0],s=t[1],i=Object(d.b)(),r=Object(a.useState)(0),o=Object(j.a)(r,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){B.collection("channels").onSnapshot((function(e){var n=e.docs[0];n&&i(C({channelId:n.id,channelName:n.data().channelName})),s(e.docs.map((function(e){return{id:e.id,channel:e.data()}})))}))}),[i]),Object(P.jsxs)("div",{className:"Sidebar",children:[Object(P.jsxs)("div",{className:"Sidebar_top",children:[Object(P.jsx)("h3",{children:"General"}),Object(P.jsx)(h.a,{})]}),Object(P.jsxs)("div",{className:"Sidebar_channels",children:[Object(P.jsxs)("div",{className:"Sidebar_channelsHeader",children:[Object(P.jsxs)("div",{className:"Sidebar_header",children:[Object(P.jsx)(h.a,{}),Object(P.jsx)("h4",{children:"Text Channels"})]}),Object(P.jsx)(m.a,{onClick:function(){var e=prompt("Enter a new channel name");e&&B.collection("channels").add({channelName:e})},className:"Sidebar_addChannel"})]}),Object(P.jsx)("div",{className:"Sidebar_channelsList",children:c.map((function(e,n){var t=e.id,a=e.channel;return Object(P.jsx)(E,{id:t,channelName:a.channelName,isSelectedChannel:n===l,selectChannel:function(){return u(n)}},t)}))})]}),Object(P.jsxs)("div",{className:"Sidebar_profile",children:[Object(P.jsxs)("div",{className:"Sidebar_profileInfo",children:[Object(P.jsx)(T.a,{src:e.photo}),Object(P.jsxs)("div",{className:"Sidebar_profileDescription",children:[Object(P.jsx)("h3",{children:e.displayName}),Object(P.jsxs)("h3",{id:"profile_id",children:["#",e.uid.substring(0,5)]})]})]}),Object(P.jsxs)("div",{className:"Sidebar_profileIcons",children:[Object(P.jsx)(p.a,{}),Object(P.jsx)(v.a,{}),Object(P.jsx)(g.a,{})]})]})]})},F=t(98),G=t.n(F),L=t(99),V=t.n(L),J=t(100),q=t.n(J),X=t(101),Z=t.n(X),$=t(102),Q=t.n($),Y=t(103),ee=t.n(Y);t(129);var ne=function(e){var n=e.channelName;return Object(P.jsxs)("div",{className:"ChatHeader",children:[Object(P.jsx)("div",{className:"ChatHeader_left",children:Object(P.jsxs)("h3",{children:[Object(P.jsx)("span",{className:"ChatHeader_hash",children:"#"}),n]})}),Object(P.jsxs)("div",{className:"ChatHeader_right",children:[Object(P.jsx)(G.a,{}),Object(P.jsx)(V.a,{}),Object(P.jsx)(q.a,{}),Object(P.jsxs)("div",{className:"ChatHeader_search",children:[Object(P.jsx)("input",{placeholder:"Search"}),Object(P.jsx)(Z.a,{})]}),Object(P.jsx)(Q.a,{}),Object(P.jsx)(ee.a,{})]})]})},te=t(108),ae=t.n(te),ce=(t(130),t(104)),se=t.n(ce);t(131);var ie=function(e){var n=e.timestamp,t=e.user,a=e.message,c=se()(a);return Object(P.jsxs)("div",{className:"Message",children:[Object(P.jsx)(T.a,{src:t.photo}),Object(P.jsxs)("div",{className:"Message_info",children:[Object(P.jsx)("h4",{children:t.displayName}),Object(P.jsx)("span",{className:"Message_timestamp",children:new Date(null===n||void 0===n?void 0:n.toDate()).toUTCString().split(" ").slice(0,4).join(" ")}),Object(P.jsx)("p",{children:c?Object(P.jsx)("img",{src:a,alt:a}):a})]})]})},re=t(39),oe=t(38),le=t(1606),de=t(111),je=t(105),ue=t.n(je),he=(t(73),t(133),function(e){e.input;var n=e.addEmojiToInput,t=Object(oe.usePopupState)({variant:"popover",popupId:"demoMenu"});return Object(P.jsxs)("div",{className:"EmojiPopUp",children:[Object(P.jsx)(ue.a,Object(re.a)({fontSize:"large"},Object(oe.bindTrigger)(t))),Object(P.jsx)(le.a,Object(re.a)(Object(re.a)({},Object(oe.bindMenu)(t)),{},{getContentAnchorEl:null,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(P.jsx)(de.a,{style:{background:"#2f3136",borderColor:"#202225"},set:"twitter",onSelect:function(e){var a=e.native;n(a),t.close(e)},theme:"dark"})}))]})}),be=t(107),me=t.n(be),Oe=t(110),pe=(t(142),function(e){var n=e.sendEmoji,t=Object(oe.usePopupState)({variant:"popover",popupId:"demoMenu"});return Object(P.jsxs)("div",{className:"GIFPopUp",children:[Object(P.jsx)(me.a,Object(re.a)({fontSize:"large"},Object(oe.bindTrigger)(t))),Object(P.jsx)(le.a,Object(re.a)(Object(re.a)({},Object(oe.bindMenu)(t)),{},{getContentAnchorEl:null,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(P.jsx)("div",{className:"searchboxWrapper",children:Object(P.jsx)(Oe.a,{apiKey:"9Ixlv3DWC1biJRI57RanyL7RTbfzz0o7",onSelect:function(e){return a=e.images.original.url,n(a),void t.close();var a},masonryConfig:[{columns:2,imageWidth:110,gutter:5},{mq:"700px",columns:3,imageWidth:120,gutter:5}]})})}))]})});var fe=function(){var e=Object(d.c)(k),n=Object(d.c)(S),t=Object(d.c)(A),c=Object(a.useState)(""),s=Object(j.a)(c,2),i=s[0],r=s[1],o=Object(a.useState)([]),l=Object(j.a)(o,2),u=l[0],h=l[1],b=Object(a.useRef)(null);return Object(a.useEffect)((function(){n&&B.collection("channels").doc(n).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return h(e.docs.map((function(e){return e.data()})))}))}),[n]),Object(a.useEffect)((function(){return b.current.scrollIntoView({behavior:"smooth"})}),[u]),Object(P.jsxs)("div",{className:"Chat",children:[Object(P.jsx)(ne,{channelName:t}),Object(P.jsxs)("div",{className:"Chat_messages",children:[u.slice().reverse().map((function(e){var n=e.timestamp,t=e.message,a=e.user;return Object(P.jsx)(ie,{user:a,message:t,timestamp:n},n+t+a)})),Object(P.jsx)("div",{ref:b})]}),Object(P.jsxs)("div",{className:"Chat_input",children:[Object(P.jsx)(ae.a,{fontSize:"large"}),Object(P.jsxs)("form",{children:[Object(P.jsx)("input",{placeholder:"Message #".concat(t),disabled:!n,value:i,onChange:function(e){return r(e.target.value)}}),Object(P.jsx)("button",{className:"Chat_inputButton",type:"submit",onClick:function(t){t&&t.preventDefault(),B.collection("channels").doc(n).collection("messages").add({timestamp:D.a.firestore.FieldValue.serverTimestamp(),message:i,user:e}),r("")},children:"Send Message"})]}),Object(P.jsxs)("div",{className:"Chat_inputIcons",children:[Object(P.jsx)(pe,{sendEmoji:function(t){B.collection("channels").doc(n).collection("messages").add({timestamp:D.a.firestore.FieldValue.serverTimestamp(),message:t,user:e}),r("")}}),Object(P.jsx)(he,{addEmojiToInput:function(e){return r(i+e)}})]})]})]})};t(143),t(1607),t(144);var ve=t(70),xe=t.n(ve),ge=t(109),_e=t.n(ge);var Ne=function(){var e=Object(d.b)(),n=Object(d.c)(k);return Object(a.useEffect)((function(){Object(l.a)(o.a.mark((function n(){var t;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_e.a.get("https://source.unsplash.com/random");case 2:t=n.sent.request.responseURL,console.log(t),W.signInAnonymously().then((function(n){e(w({uid:n.user.uid,photo:t,email:xe.a.internet.email(),displayName:xe.a.name.firstName()}))})).catch((function(e){return alert(e.message)}));case 5:case"end":return n.stop()}}),n)})))()}),[e]),n?Object(P.jsxs)("div",{className:"App",children:[Object(P.jsx)(U,{}),Object(P.jsx)(fe,{})]}):Object(P.jsx)("div",{style:{background:"#36393f",height:"100vh"}})},Ce=Object(_.a)({reducer:{user:z,app:I}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(P.jsx)(c.a.StrictMode,{children:Object(P.jsx)(d.a,{store:Ce,children:Object(P.jsx)(Ne,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[1582,1,2]]]);
//# sourceMappingURL=main.5ef4607c.chunk.js.map