(this["webpackJsonpmini-discord-clone"]=this["webpackJsonpmini-discord-clone"]||[]).push([[0],{119:function(e,n,t){},124:function(e,n,t){},126:function(e,n,t){},129:function(e,n,t){},130:function(e,n,t){},131:function(e,n,t){},133:function(e,n,t){},142:function(e,n,t){},143:function(e,n,t){},144:function(e,n,t){},1582:function(e,n,t){"use strict";t.r(n);var a=t(1),c=t.n(a),s=t(11),i=t.n(s),r=(t(119),t(67)),o=t.n(r),l=t(88),d=t(28),j=t(50),u=t(69),h=t.n(u),b=t(94),m=t.n(b),O=t(95),p=t.n(O),f=t(96),v=t.n(f),x=t(97),g=t.n(x),N=t(47),S=Object(N.b)({name:"app",initialState:{channelId:null,channelName:null},reducers:{setChannelInfo:function(e,n){e.channelId=n.payload.channelId,e.channelName=n.payload.channelName}}}),_=S.actions.setChannelInfo,C=function(e){return e.app.channelId},I=function(e){return e.app.channelName},E=S.reducer,T=(t(124),t(5));var A=function(e){var n=e.id,t=e.channelName,a=e.isSelectedChannel,c=e.selectChannel,s=Object(d.b)();return Object(T.jsx)("div",{className:"SidebarChannel".concat(a?"-active":"-unactive"),onClick:function(){c(),s(_({channelId:n,channelName:t}))},children:Object(T.jsxs)("h4",{children:[Object(T.jsx)("span",{className:"SidebarChannel_hash",children:"#"}),t]})})},P=t(1608),y=Object(N.b)({name:"user",initialState:{user:null},reducers:{login:function(e,n){e.user=n.payload},logout:function(e){e.user=null}}}),R=y.actions,w=R.login,k=(R.logout,function(e){return e.user.user}),D=y.reducer,z=(t(126),t(43)),M=Object({NODE_ENV:"production",PUBLIC_URL:"/mini-discord-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}),H={apiKey:M.REACT_APP_apiKey,authDomain:M.REACT_APP_authDomain,projectId:M.REACT_APP_projectId,storageBucket:M.REACT_APP_storageBucket,messagingSenderId:M.REACT_APP_messagingSenderId,appId:M.REACT_APP_appId,measurementId:M.REACT_APP_measurementId},W=z.a.initializeApp(H).firestore(),B=z.a.auth(),K=(new z.a.auth.GoogleAuthProvider,W);var U=function(){var e=Object(d.c)(k),n=Object(a.useState)([]),t=Object(j.a)(n,2),c=t[0],s=t[1],i=Object(d.b)(),r=Object(a.useState)(0),o=Object(j.a)(r,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){K.collection("channels").onSnapshot((function(e){var n=e.docs[0];n&&i(_({channelId:n.id,channelName:n.data().channelName})),s(e.docs.map((function(e){return{id:e.id,channel:e.data()}})))}))}),[i]),Object(T.jsxs)("div",{className:"Sidebar",children:[Object(T.jsxs)("div",{className:"Sidebar_top",children:[Object(T.jsx)("h3",{children:"General"}),Object(T.jsx)(h.a,{})]}),Object(T.jsxs)("div",{className:"Sidebar_channels",children:[Object(T.jsxs)("div",{className:"Sidebar_channelsHeader",children:[Object(T.jsxs)("div",{className:"Sidebar_header",children:[Object(T.jsx)(h.a,{}),Object(T.jsx)("h4",{children:"Text Channels"})]}),Object(T.jsx)(m.a,{onClick:function(){var e=prompt("Enter a new channel name");e&&K.collection("channels").add({channelName:e})},className:"Sidebar_addChannel"})]}),Object(T.jsx)("div",{className:"Sidebar_channelsList",children:c.map((function(e,n){var t=e.id,a=e.channel;return Object(T.jsx)(A,{id:t,channelName:a.channelName,isSelectedChannel:n===l,selectChannel:function(){return u(n)}},t)}))})]}),Object(T.jsxs)("div",{className:"Sidebar_profile",children:[Object(T.jsxs)("div",{className:"Sidebar_profileInfo",children:[Object(T.jsx)(P.a,{src:e.photo}),Object(T.jsxs)("div",{className:"Sidebar_profileDescription",children:[Object(T.jsx)("h3",{children:e.displayName}),Object(T.jsxs)("h3",{id:"profile_id",children:["#",e.uid.substring(0,5)]})]})]}),Object(T.jsxs)("div",{className:"Sidebar_profileIcons",children:[Object(T.jsx)(p.a,{}),Object(T.jsx)(v.a,{}),Object(T.jsx)(g.a,{})]})]})]})},F=t(98),L=t.n(F),V=t(99),G=t.n(V),J=t(100),q=t.n(J),$=t(101),Q=t.n($),X=t(102),Y=t.n(X),Z=t(103),ee=t.n(Z);t(129);var ne=function(e){var n=e.channelName;return Object(T.jsxs)("div",{className:"ChatHeader",children:[Object(T.jsx)("div",{className:"ChatHeader_left",children:Object(T.jsxs)("h3",{children:[Object(T.jsx)("span",{className:"ChatHeader_hash",children:"#"}),n]})}),Object(T.jsxs)("div",{className:"ChatHeader_right",children:[Object(T.jsx)(L.a,{}),Object(T.jsx)(G.a,{}),Object(T.jsx)(q.a,{}),Object(T.jsxs)("div",{className:"ChatHeader_search",children:[Object(T.jsx)("input",{placeholder:"Search"}),Object(T.jsx)(Q.a,{})]}),Object(T.jsx)(Y.a,{}),Object(T.jsx)(ee.a,{})]})]})},te=t(108),ae=t.n(te),ce=(t(130),t(104)),se=t.n(ce);t(131);var ie=function(e){var n=e.timestamp,t=e.user,a=e.message,c=se()(a);return Object(T.jsxs)("div",{className:"Message",children:[Object(T.jsx)(P.a,{src:t.photo}),Object(T.jsxs)("div",{className:"Message_info",children:[Object(T.jsx)("h4",{children:t.displayName}),Object(T.jsx)("span",{className:"Message_timestamp",children:new Date(null===n||void 0===n?void 0:n.toDate()).toUTCString().split(" ").slice(0,4).join(" ")}),Object(T.jsx)("p",{children:c?Object(T.jsx)("img",{src:a,alt:a}):a})]})]})},re=t(39),oe=t(38),le=t(1606),de=t(111),je=t(105),ue=t.n(je),he=(t(73),t(133),function(e){e.input;var n=e.addEmojiToInput,t=Object(oe.usePopupState)({variant:"popover",popupId:"demoMenu"});return Object(T.jsxs)("div",{className:"EmojiPopUp",children:[Object(T.jsx)(ue.a,Object(re.a)({fontSize:"large"},Object(oe.bindTrigger)(t))),Object(T.jsx)(le.a,Object(re.a)(Object(re.a)({},Object(oe.bindMenu)(t)),{},{getContentAnchorEl:null,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(T.jsx)(de.a,{style:{background:"#2f3136",borderColor:"#202225"},set:"twitter",onSelect:function(e){var a=e.native;n(a),t.close(e)},theme:"dark"})}))]})}),be=t(107),me=t.n(be),Oe=t(110),pe=(t(142),function(e){var n=e.sendEmoji,t=Object(oe.usePopupState)({variant:"popover",popupId:"demoMenu"});return Object(T.jsxs)("div",{className:"GIFPopUp",children:[Object(T.jsx)(me.a,Object(re.a)({fontSize:"large"},Object(oe.bindTrigger)(t))),Object(T.jsx)(le.a,Object(re.a)(Object(re.a)({},Object(oe.bindMenu)(t)),{},{getContentAnchorEl:null,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(T.jsx)("div",{className:"searchboxWrapper",children:Object(T.jsx)(Oe.a,{apiKey:"9Ixlv3DWC1biJRI57RanyL7RTbfzz0o7",onSelect:function(e){return a=e.images.original.url,n(a),void t.close();var a},masonryConfig:[{columns:2,imageWidth:110,gutter:5},{mq:"700px",columns:3,imageWidth:120,gutter:5}]})})}))]})});var fe=function(){var e=Object(d.c)(k),n=Object(d.c)(C),t=Object(d.c)(I),c=Object(a.useState)(""),s=Object(j.a)(c,2),i=s[0],r=s[1],o=Object(a.useState)([]),l=Object(j.a)(o,2),u=l[0],h=l[1],b=Object(a.useRef)(null);return Object(a.useEffect)((function(){n&&K.collection("channels").doc(n).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return h(e.docs.map((function(e){return e.data()})))}))}),[n]),Object(a.useEffect)((function(){return b.current.scrollIntoView({behavior:"smooth"})}),[u]),Object(T.jsxs)("div",{className:"Chat",children:[Object(T.jsx)(ne,{channelName:t}),Object(T.jsxs)("div",{className:"Chat_messages",children:[u.slice().reverse().map((function(e){var n=e.timestamp,t=e.message,a=e.user;return Object(T.jsx)(ie,{user:a,message:t,timestamp:n},n+t+a)})),Object(T.jsx)("div",{ref:b})]}),Object(T.jsxs)("div",{className:"Chat_input",children:[Object(T.jsx)(ae.a,{fontSize:"large"}),Object(T.jsxs)("form",{children:[Object(T.jsx)("input",{placeholder:"Message #".concat(t),disabled:!n,value:i,onChange:function(e){return r(e.target.value)}}),Object(T.jsx)("button",{className:"Chat_inputButton",type:"submit",onClick:function(t){t&&t.preventDefault(),K.collection("channels").doc(n).collection("messages").add({timestamp:z.a.firestore.FieldValue.serverTimestamp(),message:i,user:e}),r("")},children:"Send Message"})]}),Object(T.jsxs)("div",{className:"Chat_inputIcons",children:[Object(T.jsx)(pe,{sendEmoji:function(t){K.collection("channels").doc(n).collection("messages").add({timestamp:z.a.firestore.FieldValue.serverTimestamp(),message:t,user:e}),r("")}}),Object(T.jsx)(he,{addEmojiToInput:function(e){return r(i+e)}})]})]})]})};t(143),t(1607),t(144);var ve=t(70),xe=t.n(ve),ge=t(109),Ne=t.n(ge);var Se=function(){var e=Object(d.b)(),n=Object(d.c)(k);return Object(a.useEffect)((function(){Object(l.a)(o.a.mark((function n(){var t;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ne.a.get("https://source.unsplash.com/random");case 2:t=n.sent.request.responseURL,console.log(t),B.signInAnonymously().then((function(n){e(w({uid:n.user.uid,photo:t,email:xe.a.internet.email(),displayName:xe.a.name.firstName()}))})).catch((function(e){return alert(e.message)}));case 5:case"end":return n.stop()}}),n)})))()}),[e]),n?Object(T.jsxs)("div",{className:"App",children:[Object(T.jsx)(U,{}),Object(T.jsx)(fe,{})]}):Object(T.jsx)("div",{style:{background:"#36393f",height:"100vh"}})},_e=Object(N.a)({reducer:{user:D,app:E}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(d.a,{store:_e,children:Object(T.jsx)(Se,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[1582,1,2]]]);
//# sourceMappingURL=main.5121e7f5.chunk.js.map