(this["webpackJsonpmini-discord-clone"]=this["webpackJsonpmini-discord-clone"]||[]).push([[0],{119:function(e,a,n){},123:function(e,a,n){},125:function(e,a,n){},131:function(e,a,n){},132:function(e,a,n){},133:function(e,a,n){},135:function(e,a,n){},144:function(e,a,n){},145:function(e,a,n){},146:function(e,a,n){},1584:function(e,a,n){"use strict";n.r(a);var t=n(0),s=n.n(t),c=n(12),i=n.n(c),r=(n(119),n(30)),o=n(72),l=n.n(o),d=n(94),j=n.n(d),h=n(95),b=n.n(h),m=n(96),u=n.n(m),p=n(97),O=n.n(p),x=n(48);const v=Object(x.b)({name:"app",initialState:{channelId:null,channelName:null},reducers:{setChannelInfo:(e,a)=>{e.channelId=a.payload.channelId,e.channelName=a.payload.channelName}}}),{setChannelInfo:g}=v.actions,_=e=>e.app.channelId,f=e=>e.app.channelName;var N=v.reducer,C=(n(123),n(5));var S=function({id:e,channelName:a,isSelectedChannel:n,selectChannel:t}){const s=Object(r.b)();return Object(C.jsx)("div",{className:"SidebarChannel"+(n?"-active":"-unactive"),onClick:()=>{t(),s(g({channelId:e,channelName:a}))},children:Object(C.jsxs)("h4",{children:[Object(C.jsx)("span",{className:"SidebarChannel_hash",children:"#"}),a]})})},A=n(1610);const I=Object(x.b)({name:"user",initialState:{user:null},reducers:{login:(e,a)=>{e.user=a.payload},logout:e=>{e.user=null}}}),{login:P,logout:E}=I.actions,T=e=>e.user.user;var y=I.reducer,R=(n(125),n(45));const{REACT_APP_apiKey:w,REACT_APP_authDomain:k,REACT_APP_projectId:z,REACT_APP_storageBucket:D,REACT_APP_messagingSenderId:K,REACT_APP_appId:H,REACT_APP_measurementId:M}=Object({NODE_ENV:"production",PUBLIC_URL:"/mini-discord-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_apiKey:"AIzaSyArzU5IKtR9yTaiH7T6eSUk037Kpi21Aew",REACT_APP_appId:'1:585254623929:web:57a08d3130d8223c711968"',REACT_APP_authDomain:"discord-clone-yt2.firebaseapp.com",REACT_APP_measurementId:"G-NGNZ4VKXFK",REACT_APP_messagingSenderId:"585254623929",REACT_APP_projectId:"discord-clone-yt2",REACT_APP_storageBucket:"discord-clone-yt2.appspot.com"}),W={apiKey:w,authDomain:k,projectId:z,storageBucket:D,messagingSenderId:K,appId:H,measurementId:M},B=R.a.initializeApp(W).firestore(),U=R.a.auth();new R.a.auth.GoogleAuthProvider;var F=B;var G=function(){const e=Object(r.c)(T),[a,n]=Object(t.useState)([]),s=Object(r.b)(),[c,i]=Object(t.useState)(0);return Object(t.useEffect)((()=>{F.collection("channels").onSnapshot((e=>{const a=e.docs[0];a&&s(g({channelId:a.id,channelName:a.data().channelName})),n(e.docs.map((e=>({id:e.id,channel:e.data()}))))}))}),[s]),Object(C.jsxs)("div",{className:"Sidebar",children:[Object(C.jsxs)("div",{className:"Sidebar_top",children:[Object(C.jsx)("h3",{children:"General"}),Object(C.jsx)(l.a,{})]}),Object(C.jsxs)("div",{className:"Sidebar_channels",children:[Object(C.jsxs)("div",{className:"Sidebar_channelsHeader",children:[Object(C.jsxs)("div",{className:"Sidebar_header",children:[Object(C.jsx)(l.a,{}),Object(C.jsx)("h4",{children:"Text Channels"})]}),Object(C.jsx)(j.a,{onClick:()=>{const e=prompt("Enter a new channel name");e&&F.collection("channels").add({channelName:e})},className:"Sidebar_addChannel"})]}),Object(C.jsx)("div",{className:"Sidebar_channelsList",children:a.map((({id:e,channel:a},n)=>Object(C.jsx)(S,{id:e,channelName:a.channelName,isSelectedChannel:n===c,selectChannel:()=>i(n)},e)))})]}),Object(C.jsxs)("div",{className:"Sidebar_profile",children:[Object(C.jsxs)("div",{className:"Sidebar_profileInfo",children:[Object(C.jsx)(A.a,{src:e.photo}),Object(C.jsxs)("div",{className:"Sidebar_profileDescription",children:[Object(C.jsx)("h3",{children:e.displayName}),Object(C.jsxs)("h3",{id:"profile_id",children:["#",e.uid.substring(0,5)]})]})]}),Object(C.jsxs)("div",{className:"Sidebar_profileIcons",children:[Object(C.jsx)(b.a,{}),Object(C.jsx)(u.a,{}),Object(C.jsx)(O.a,{})]})]})]})},L=n(98),V=n.n(L),J=n(99),q=n.n(J),$=n(100),X=n.n($),Z=n(101),Q=n.n(Z),Y=n(102),ee=n.n(Y),ae=n(103),ne=n.n(ae);n(131);var te=function({channelName:e}){return Object(C.jsxs)("div",{className:"ChatHeader",children:[Object(C.jsx)("div",{className:"ChatHeader_left",children:Object(C.jsxs)("h3",{children:[Object(C.jsx)("span",{className:"ChatHeader_hash",children:"#"}),e]})}),Object(C.jsxs)("div",{className:"ChatHeader_right",children:[Object(C.jsx)(V.a,{}),Object(C.jsx)(q.a,{}),Object(C.jsx)(X.a,{}),Object(C.jsxs)("div",{className:"ChatHeader_search",children:[Object(C.jsx)("input",{placeholder:"Search"}),Object(C.jsx)(Q.a,{})]}),Object(C.jsx)(ee.a,{}),Object(C.jsx)(ne.a,{})]})]})},se=n(108),ce=n.n(se),ie=(n(132),n(104)),re=n.n(ie);n(133);var oe=function({timestamp:e,user:a,message:n}){const t=re()(n);return Object(C.jsxs)("div",{className:"Message",children:[Object(C.jsx)(A.a,{src:a.photo}),Object(C.jsxs)("div",{className:"Message_info",children:[Object(C.jsx)("h4",{children:a.displayName}),Object(C.jsx)("span",{className:"Message_timestamp",children:new Date(null===e||void 0===e?void 0:e.toDate()).toUTCString().split(" ").slice(0,4).join(" ")}),Object(C.jsx)("p",{children:t?Object(C.jsx)("img",{src:n,alt:n}):n})]})]})},le=n(40),de=n(1608),je=n(111),he=n(105),be=n.n(he);n(75),n(135);var me=({input:e,addEmojiToInput:a})=>{const n=Object(le.usePopupState)({variant:"popover",popupId:"demoMenu"});return Object(C.jsxs)("div",{className:"EmojiPopUp",children:[Object(C.jsx)(be.a,{fontSize:"large",...Object(le.bindTrigger)(n)}),Object(C.jsx)(de.a,{...Object(le.bindMenu)(n),getContentAnchorEl:null,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(C.jsx)(je.a,{style:{background:"#2f3136",borderColor:"#202225"},set:"twitter",onSelect:e=>{const t=e.native;a(t),n.close(e)},theme:"dark"})})]})},ue=n(107),pe=n.n(ue),Oe=n(110);n(144);var xe=({sendEmoji:e})=>{const a=Object(le.usePopupState)({variant:"popover",popupId:"demoMenu"});return Object(C.jsxs)("div",{className:"GIFPopUp",children:[Object(C.jsx)(pe.a,{fontSize:"large",...Object(le.bindTrigger)(a)}),Object(C.jsx)(de.a,{...Object(le.bindMenu)(a),getContentAnchorEl:null,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:Object(C.jsx)("div",{className:"searchboxWrapper",children:Object(C.jsx)(Oe.a,{apiKey:"9Ixlv3DWC1biJRI57RanyL7RTbfzz0o7",onSelect:n=>{return t=n.images.original.url,e(t),void a.close();var t},masonryConfig:[{columns:2,imageWidth:110,gutter:5},{mq:"700px",columns:3,imageWidth:120,gutter:5}]})})})]})};var ve=function(){const e=Object(r.c)(T),a=Object(r.c)(_),n=Object(r.c)(f),[s,c]=Object(t.useState)(""),[i,o]=Object(t.useState)([]),l=Object(t.useRef)(null);return Object(t.useEffect)((()=>{a&&F.collection("channels").doc(a).collection("messages").orderBy("timestamp","desc").onSnapshot((e=>o(e.docs.map((e=>e.data())))))}),[a]),Object(t.useEffect)((()=>l.current.scrollIntoView({behavior:"smooth"})),[i]),Object(C.jsxs)("div",{className:"Chat",children:[Object(C.jsx)(te,{channelName:n}),Object(C.jsxs)("div",{className:"Chat_messages",children:[i.slice().reverse().map((({timestamp:e,message:a,user:n})=>Object(C.jsx)(oe,{user:n,message:a,timestamp:e},e+a+n))),Object(C.jsx)("div",{ref:l})]}),Object(C.jsxs)("div",{className:"Chat_input",children:[Object(C.jsx)(ce.a,{fontSize:"large"}),Object(C.jsxs)("form",{children:[Object(C.jsx)("input",{placeholder:`Message #${n}`,disabled:!a,value:s,onChange:e=>c(e.target.value)}),Object(C.jsx)("button",{className:"Chat_inputButton",type:"submit",onClick:n=>{n&&n.preventDefault(),F.collection("channels").doc(a).collection("messages").add({timestamp:R.a.firestore.FieldValue.serverTimestamp(),message:s,user:e}),c("")},children:"Send Message"})]}),Object(C.jsxs)("div",{className:"Chat_inputIcons",children:[Object(C.jsx)(xe,{sendEmoji:n=>{F.collection("channels").doc(a).collection("messages").add({timestamp:R.a.firestore.FieldValue.serverTimestamp(),message:n,user:e}),c("")}}),Object(C.jsx)(me,{addEmojiToInput:e=>c(s+e)})]})]})]})};n(145),n(1609),n(146);var ge=n(73),_e=n.n(ge),fe=n(109),Ne=n.n(fe);var Ce=function(){const e=Object(r.b)(),a=Object(r.c)(T);return Object(t.useEffect)((()=>{(async()=>{const a=(await Ne.a.get("https://unsplash.it/900/900?random")).request.responseURL;console.log(a),U.signInAnonymously().then((n=>{e(P({uid:n.user.uid,photo:a,email:_e.a.internet.email(),displayName:_e.a.name.firstName()}))})).catch((e=>alert(e.message)))})()}),[e]),a?Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(G,{}),Object(C.jsx)(ve,{})]}):Object(C.jsx)("div",{style:{background:"#36393f",height:"100vh"}})},Se=Object(x.a)({reducer:{user:y,app:N}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(r.a,{store:Se,children:Object(C.jsx)(Ce,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))}},[[1584,1,2]]]);
//# sourceMappingURL=main.dc0e4598.chunk.js.map